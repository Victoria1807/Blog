{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block head_title %}Blog{% endblock head_title %}</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
    href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet"
    href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href='{% static "css/style.css" %}'>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <style>
        {% block style %}
        {% endblock style %}
    </style>

{% block head_extra %}{% endblock head_extra %}
</head>
<body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = 'https://connect.facebook.net/uk_UA/sdk.js#xfbml=1&version=v3.0';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

    {% include "messages_display.html" %}
    <div class="container">
    {% block content %}

    {% endblock content %}
    </div>

<!-- Latest compiled and minified JavaScript -->
<script
  src="http://code.jquery.com/jquery-1.12.4.min.js"
  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
  crossorigin="anonymous"></script>

<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.19/marked.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $(".content-markdown").each(function () {
            var content = $(this).text();
            var markedContent = marked(content);
            $(this).html(markedContent);
        })

        $(".post-detail-item img").each(function () {
            $(this).addClass("img-responsive");
        })

        var contentInput = $("#id_content");

        function setContent(value) {
            var markedContent = marked(value);
            $("#preview-content").html(markedContent);
            $("#preview-content img").each(function () {
                $(this).addClass("img-responsive");
            })
        }

        setContent(contentInput.val());

        contentInput.keyup(function () {
            var newContent = $(this).val();
            setContent(newContent);
        })

        var titleInput= $("#id_title");

        function setTitle(value) {
            $("#preview-title").text(value);
        }

        setTitle(titleInput.val());
        
        titleInput.keyup(function () {
            var newContent = $(this).val();
            setTitle(newContent);
        })

        $(".comment-reply-btn").click(function (event) {
            event.preventDefault();
            $(this).parent().next(".comment-reply").fadeToggle();
        })
    })
</script>
</body>
</html>


